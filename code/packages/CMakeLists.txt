set(CPACK_PACKAGE_NAME "SPTK")
set(CPACK_PACKAGE_VENDOR "linotex.net")
set(CPACK_PACKAGE_DESCRIPTION_SUMMARY "Cross-platform development library")
set(CPACK_PACKAGE_VERSION ${VERSION})
set(CPACK_PACKAGE_VERSION_MAJOR ${VERSION_MAJOR})
set(CPACK_PACKAGE_VERSION_MINOR ${VERSION_MINOR})
set(CPACK_PACKAGE_VERSION_PATCH ${VERSION_PATCH})
set(CPACK_PACKAGE_INSTALL_DIRECTORY "packages")
set(CPACK_PACKAGE_HOMEPAGE_URL "https://www.sptk.net")

SET(CMAKE_INSTALL_RPATH ${CMAKE_INSTALL_PREFIX}/lib)
SET(CPACK_PACKAGING_INSTALL_PREFIX ${CMAKE_INSTALL_PREFIX})

IF (OS_FLAVOUR STREQUAL "ol" OR OS_FLAVOUR STREQUAL "fedora" OR OS_FLAVOUR STREQUAL "redhat")
    SET(CPACK_GENERATOR "RPM")
    SET(CPACK_RPM_PACKAGE_COMPONENT ON)
    SET(CPACK_RPM_COMPONENT_INSTALL ON)
    SET(CPACK_RPM_PACKAGE_SHLIBDEPS TRUE)
    SET(CPACK_RPM_PACKAGE_GENERATE_SHLIBS ON)
    SET(CPACK_RPM_PACKAGE_MAINTAINER "alexeyp@gmail.com")

    SET(CPACK_RPM_CORE_FILE_NAME RPM-DEFAULT)
    SET(CPACK_RPM_GUI_FILE_NAME RPM-DEFAULT)
    SET(CPACK_RPM_DB_FILE_NAME RPM-DEFAULT)
    SET(CPACK_RPM_DB_MYSQL_FILE_NAME RPM-DEFAULT)
    SET(CPACK_RPM_DB_ODBC_FILE_NAME RPM-DEFAULT)
    SET(CPACK_RPM_DB_ORACLE_FILE_NAME RPM-DEFAULT)
    SET(CPACK_RPM_DB_POSTGRESQL_FILE_NAME RPM-DEFAULT)
    SET(CPACK_RPM_DB_SQLITE3_FILE_NAME RPM-DEFAULT)
    SET(CPACK_RPM_DB_FIREBIRD_FILE_NAME RPM-DEFAULT)
    SET(CPACK_RPM_UNIT_TESTS_FILE_NAME RPM-DEFAULT)

    SET(CPACK_RPM_COMPRESSION_TYPE "xz")
    SET(CPACK_RPM_PACKAGE_AUTOREQ 0)
    SET(CPACK_RPM_PACKAGE_REQUIRES "mariadb, sqlite, postgresql, pcre, unixODBC, fltk, aspell, brotli-devel, gtest-devel")
ENDIF ()

IF (OS_FLAVOUR STREQUAL "debian" OR OS_FLAVOUR STREQUAL "linuxmint" OR OS_FLAVOUR STREQUAL "ubuntu")
    SET(CPACK_GENERATOR "DEB")
    SET(CPACK_DEB_PACKAGE_COMPONENT ON)
    SET(CPACK_DEB_COMPONENT_INSTALL ON)
    SET(CPACK_DEBIAN_PACKAGE_SHLIBDEPS TRUE)
    SET(CPACK_DEBIAN_PACKAGE_GENERATE_SHLIBS ON)
    SET(CPACK_DEBIAN_PACKAGE_MAINTAINER "alexeyp@gmail.com")

    SET(CPACK_DEBIAN_CORE_FILE_NAME DEB-DEFAULT)
    SET(CPACK_DEBIAN_GUI_FILE_NAME DEB-DEFAULT)
    SET(CPACK_DEBIAN_DB_FILE_NAME DEB-DEFAULT)
    SET(CPACK_DEBIAN_DB_MYSQL_FILE_NAME DEB-DEFAULT)
    SET(CPACK_DEBIAN_DB_ODBC_FILE_NAME DEB-DEFAULT)
    SET(CPACK_DEBIAN_DB_ORACLE_FILE_NAME DEB-DEFAULT)
    SET(CPACK_DEBIAN_DB_POSTGRESQL_FILE_NAME DEB-DEFAULT)
    SET(CPACK_DEBIAN_DB_SQLITE3_FILE_NAME DEB-DEFAULT)
    SET(CPACK_DEBIAN_DB_FIREBIRD_FILE_NAME DEB-DEFAULT)
    SET(CPACK_DEBIAN_UNIT_TESTS_FILE_NAME DEB-DEFAULT)

    SET(CPACK_DEBIAN_COMPRESSION_TYPE "xz")
    SET(CPACK_DEBIAN_PACKAGE_DEPENDS "mariadb-client, sqlite3, postgresql, libpcre3, unixodbc, libfltk1.3, aspell, libbrotli-dev, libgtest-dev")
ENDIF ()

set(CPACK_ARCHIVE_COMPONENT_INSTALL 1)

SET(CPACK_COMPONENTS_ALL core db unit_tests)
SET(CPACK_COMPONENT_db_DEPENDS core)
SET(CPACK_COMPONENT_unit_tests_DEPENDS core db)

IF (FLTK_LIBRARY)
    LIST(APPEND CPACK_COMPONENTS_ALL gui)
    SET(CPACK_COMPONENT_GUI_DEPENDS core db)
ENDIF ()

IF (Oracle_FOUND OR OCI_FOUND)
    LIST(APPEND CPACK_COMPONENTS_ALL db_oracle)
    SET(CPACK_COMPONENT_DB_ORACLE_DEPENDS core db)
ENDIF ()

IF (PostgreSQL_LIBRARY)
    LIST(APPEND CPACK_COMPONENTS_ALL db_postgresql)
    SET(CPACK_COMPONENT_DB_POSTGRESQL_DEPENDS core db)
ENDIF ()

IF (MySQL_LIBRARY)
    LIST(APPEND CPACK_COMPONENTS_ALL db_mysql)
    SET(CPACK_COMPONENT_DB_MYSQL_DEPENDS core db)
ENDIF ()

IF (Firebird_LIBRARY)
    LIST(APPEND CPACK_COMPONENTS_ALL db_firebird)
    SET(CPACK_COMPONENT_DB_FIREBIRD_DEPENDS core db)
ENDIF ()

IF (SQLITE3_LIBRARY)
    LIST(APPEND CPACK_COMPONENTS_ALL db_sqlite3)
    SET(CPACK_COMPONENT_DB_SQLITE3_DEPENDS core db)
ENDIF ()

IF (ODBC_LIBRARY)
    LIST(APPEND CPACK_COMPONENTS_ALL db_odbc)
    SET(CPACK_COMPONENT_DB_ODBC_DEPENDS core db)
ENDIF ()

set(CPACK_COMPONENT_CORE_DESCRIPTION "Core of SPTK library")
set(CPACK_COMPONENT_DB_DESCRIPTION "SPTK database library")
set(CPACK_COMPONENT_DB_MYSQL_DESCRIPTION "SPTK database library")
set(CPACK_COMPONENT_DB_ODBC_DESCRIPTION "SPTK ODBC support")
set(CPACK_COMPONENT_DB_ORACLE_DESCRIPTION "SPTK Oracle support")
set(CPACK_COMPONENT_DB_POSTGRESQL_DESCRIPTION "SPTK PostgreSQL support")
set(CPACK_COMPONENT_DB_SQLITE3_DESCRIPTION "SPTK SQLite3 support")
set(CPACK_COMPONENT_DB_FIREBIRD_DESCRIPTION "SPTK Firebird support")
set(CPACK_COMPONENT_GUI_DESCRIPTION "SPTK GUI library")
set(CPACK_COMPONENT_UNIT_TESTS_DESCRIPTION "SPTK unit_tests")


INCLUDE(CPack)
